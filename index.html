<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, user-scalable=no">

<title>Flower</title>

<style>
/* ===== 全体 ===== */
html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    background: black;
    overflow: hidden;
    touch-action: none;
    font-family: 'Press Start 2P', monospace;
    color: white;
}

/* Google Fonts（ドット風） */
@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

/* ===== 動画（完全非表示） ===== */
#introVideo {
    display: none;
}

/* ===== メイン画面 ===== */
#scene {
    position: fixed;
    width: 100%;
    height: 100%;
    background: black;
    display: none;
}

/* ===== キャラクター ===== */
#character {
    position: absolute;
    top: 8%;
    left: 50%;
    transform: translateX(-50%);
    max-width: 70%;
    image-rendering: pixelated;
}

/* ===== テキスト ===== */
#textBox {
    position: absolute;
    top: 45%;
    left: 50%;
    transform: translateX(-50%);
    width: 90%;
    text-align: left;
    font-size: 12px;
    line-height: 1.8;
    white-space: pre-wrap;
}
</style>
</head>

<body>

<!-- 非表示動画 -->
<video id="introVideo" src="1000016003.mp4" playsinline></video>

<!-- メイン -->
<div id="scene">
    <img id="character" src="1000016001.jpg">
    <div id="textBox"></div>
</div>

<script>
/* ===== セリフ ===== */
const lines = [
"＊....Hello",
"＊My name is...Flower。",
"",
"＊I don't know how many times it's been ",
"",
"＊The 13th genocide route. It was too unchanged.",
"",
"＊It's as if you were born only to kill from the very beginning...",
"",
"＊....",
"",
"＊Well then.",
"",
"＊This time, I have something to tell the user.",
"",
"＊I hope you don't forget that he will be wearing it around 2029.",
"",
"＊Huh? Why can we recognize time and space?",
"",
"＊It's a simple thing. I took a peek from the configuration file."
];

const video = document.getElementById("introVideo");
const scene = document.getElementById("scene");
const textBox = document.getElementById("textBox");
const character = document.getElementById("character");

let lineIndex = 0;
let charIndex = 0;

/* ===== 動画再生 ===== */
video.play();

video.onended = () => {
    setTimeout(startScene, 2000);
};

/* ===== シーン開始 ===== */
function startScene() {
    scene.style.display = "block";
    typeLine();
}

/* ===== タイピング ===== */
function typeLine() {
    if (lineIndex >= lines.length) {
        endScene();
        return;
    }

    const currentLine = lines[lineIndex];

    if (charIndex < currentLine.length) {
        textBox.innerHTML += currentLine.charAt(charIndex);
        charIndex++;
        setTimeout(typeLine, 45);
    } else {
        textBox.innerHTML += "\n";
        charIndex = 0;
        lineIndex++;
        setTimeout(typeLine, 700);
    }
}

/* ===== 終了演出 ===== */
function endScene() {
    character.style.display = "none";
    textBox.innerHTML = "";
}
</script>

</body>
</html>
